@page "/"
@using Microsoft.AspNetCore.Authorization
@using FrontEnd.Services
@using Microsoft.AspNetCore.Components
@attribute [Authorize]

@inject IRoleService RoleService
@inject NavigationManager NavigationManager

<PageTitle>Home</PageTitle>

<h1>Welcome to Project Coordinator</h1>

<p>
    This application helps you coordinate your projects and calculate trips to different locations.
</p>

<p>
    Use the navigation menu to access different features of the application.
</p>

@code {
    protected override async Task OnInitializedAsync()
    {
        try
        {
            var roles = await RoleService.GetUserRolesAsync();
            if (roles.Contains("projectcoordination", StringComparer.OrdinalIgnoreCase))
            {
                NavigationManager.NavigateTo("/trips");
            }
        }
        catch
        {
            // If role check fails, stay on home page
        }
    }
}